pkgname=seafile-common
pkgver=1.7.1
pkgrel=1
pkgdesc="Seafile is an open-source Dropbox replacement. Common files for server and client."
arch=('i686' 'x86_64')
url="http://seafile.com"
license=('GPLv3')
depends=('glib2>=2.28' 'libevent>=2.0' 'curl' 'util-linux' 'intltool>=0.40' 'sqlite>=3.7' 'libmysqlclient>=5.5' 'python2-mako' 'python2-webpy' 'python2-simplejson' 'python2-imaging' 'python2-chardet' 'python2-pip' 'python2-virtualenv' 'gunicorn' 'python2-djblets' 'ccnet>=1.3.3' 'libsearpc>=1.1.0' 'libevhtp')
makedepends=('pacman>=4.1')
optdepends=()
provides=()
conflicts=('seafile')
options=

source=("https://seafile.googlecode.com/files/seafile-${pkgver}.tar.gz")
sha256sums=('8bce8f727deebc71c04a0e1b6ad3d9d39a6454858128a0e75e1903d59fabef79')

prepare () {
	cd "$srcdir/${pkgname/-common/}-$pkgver"
}

build () {
	cd "$srcdir/${pkgname/-common/}-$pkgver"
	./configure --disable-server --disable-client --prefix=/usr PYTHON=/usr/bin/python2
	make -j1
}

package () {
	cd "$srcdir/${pkgname/-common/}-$pkgver"
	make DESTDIR="$pkgdir/" install
}
